!function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/bundles/weblaintelligentcrossselling/",n(n.s="T0B0")}({"2iCt":function(e,t,n){var r=n("nDgs");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n("SZ7m").default)("fffe2d7a",r,!0,{})},SZ7m:function(e,t,n){"use strict";function r(e,t){for(var n=[],r={},s=0;s<t.length;s++){var i=t[s],o=i[0],l={id:e+":"+s,css:i[1],media:i[2],sourceMap:i[3]};r[o]?r[o].parts.push(l):n.push(r[o]={id:o,parts:[l]})}return n}n.r(t),n.d(t,"default",(function(){return f}));var s="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!s)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},o=s&&(document.head||document.getElementsByTagName("head")[0]),l=null,a=0,c=!1,u=function(){},d=null,m="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(e,t,n,s){c=n,d=s||{};var o=r(e,t);return g(o),function(t){for(var n=[],s=0;s<o.length;s++){var l=o[s];(a=i[l.id]).refs--,n.push(a)}t?g(o=r(e,t)):o=[];for(s=0;s<n.length;s++){var a;if(0===(a=n[s]).refs){for(var c=0;c<a.parts.length;c++)a.parts[c]();delete i[a.id]}}}}function g(e){for(var t=0;t<e.length;t++){var n=e[t],r=i[n.id];if(r){r.refs++;for(var s=0;s<r.parts.length;s++)r.parts[s](n.parts[s]);for(;s<n.parts.length;s++)r.parts.push(b(n.parts[s]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var o=[];for(s=0;s<n.parts.length;s++)o.push(b(n.parts[s]));i[n.id]={id:n.id,refs:1,parts:o}}}}function v(){var e=document.createElement("style");return e.type="text/css",o.appendChild(e),e}function b(e){var t,n,r=document.querySelector("style["+m+'~="'+e.id+'"]');if(r){if(c)return u;r.parentNode.removeChild(r)}if(p){var s=a++;r=l||(l=v()),t=_.bind(null,r,s,!1),n=_.bind(null,r,s,!0)}else r=v(),t=w.bind(null,r),n=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else n()}}var x,h=(x=[],function(e,t){return x[e]=t,x.filter(Boolean).join("\n")});function _(e,t,n,r){var s=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=h(t,s);else{var i=document.createTextNode(s),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}function w(e,t){var n=t.css,r=t.media,s=t.sourceMap;if(r&&e.setAttribute("media",r),d.ssrId&&e.setAttribute(m,t.id),s&&(n+="\n/*# sourceURL="+s.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},T0B0:function(e,t,n){"use strict";n.r(t);n("nEGZ");function r(e,t,n,r,s,i,o){try{var l=e[i](o),a=l.value}catch(e){return void n(e)}l.done?t(a):Promise.resolve(a).then(r,s)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(s,i){var o=e.apply(t,n);function l(e){r(o,s,i,l,a,"next",e)}function a(e){r(o,s,i,l,a,"throw",e)}l(void 0)}))}}var i=Shopware,o=i.Component,l=i.Context,a=i.Mixin,c=Shopware.Data.Criteria;o.register("cross-sell-matrix-list",{template:'{% block cross_sell_matrix_index %}\n    <sw-page class="cross-sell-matrix-list">\n\n        {% block cross_sell_matrix_list_smart_bar_actions %}\n            <template slot="smart-bar-actions">\n            {% block cross_sell_matrix_list_smart_bar_actions_save %}\n                    <sw-button class="cross-sell-matrix-list__button-save" variant="primary" @click="onSave">\n                        {{ $tc(\'cross-sell-matrix.list.buttonSaveCrossSellSettings\') }}\n                    </sw-button>\n                {% endblock %}\n                {% block cross_sell_matrix_list_smart_bar_actions_add %}\n                    <sw-button class="cross-sell-matrix-list__button-create" variant="primary"\n                        :router-link="{ name: \'cross.sell.matrix.create\' }">\n                        {{ $tc(\'cross-sell-matrix.list.buttonAddCrossSellWeight\') }}\n                    </sw-button>\n                {% endblock %}\n            </template>\n        {% endblock %}\n\n        {% block cross_sell_matrix_list_content %}\n            <sw-card-view slot="content" v-if="!isLoading">\n                {% block cross_sell_matrix_list_settngs_card %}\n                    <sw-card v-if="!isLoading" value-identifier="cross-sell-matrix-list-settings" :title="$tc(\'cross-sell-matrix.list.settingsCardHeader\')">\n                        <div class="cross-selling-wrapper">\n                            <sw-text-field :placeholder="$tc(\'cross-sell-matrix.list.labelTitle\')" :copyable="true" :copyableTooltip="false" v-model="settings.title" :label="$tc(\'cross-sell-matrix.list.labelTitle\')">\n                            </sw-text-field>\n                            <sw-number-field v-model="settings.maxProducts" numberType="int" :step="1" :min="1" :max="100" :value="null" :digits="2" :fillDigits="false" :allowEmpty="false">\n                                <template v-slot:label>{{$tc(\'cross-sell-matrix.list.labelMaxProducts\')}}</template>\n                            </sw-number-field>\n                            <sw-switch-field v-model="settings.active" :label="$tc(\'cross-sell-matrix.list.labelActive\')"></sw-switch-field>\n                            <sw-switch-field v-model="settings.onlyCategory" :label="$tc(\'cross-sell-matrix.list.labelOnlyCategory\')"></sw-switch-field>\n                            <sw-switch-field v-model="settings.showTitle" :label="$tc(\'cross-sell-matrix.list.labelShowTitle\')"></sw-switch-field>\n                        </div>\n                    </sw-card>\n                {% endblock %}\n                {% block cross_sell_matrix_list_content_card %}\n                    <sw-card value-identifier="cross-sell-matrix-list-content" :title="$tc(\'cross-sell-matrix.list.weightCardHeader\')">\n                        <template #grid>\n                            {% block cross_sell_matrix_list_grid %}\n                                <sw-data-grid\n                                    :dataSource="dataSource"\n                                    :items="items"\n                                    :columns="columns"\n                                    :showSelection="false"\n                                    :showSettings="true"\n                                    :allowInlineEdit="true"\n                                    :repository="crossSellingPropertyGroupRepository"\n                                    :isLoading="isLoading"\n                                    :allowColumnEdit="true"\n                                    @inline-edit-save="saveItem"\n                                    >\n                                        {% block cross_sell_matrix_list_column %}\n                                            <template\n                                                slot="weight"\n                                                slot-scope="{ item, isInlineEdit }"\n                                            >\n                                                <template v-if="isInlineEdit">\n                                                   <sw-number-field numberType="int" :step="1" :min="1" :max="100" :digits="0" :fillDigits="false" :allowEmpty="false" :placeholder="$tc(\'cross-sell-matrix.entity.weightLabel\')"\n                                                        v-model="item.weight"\n                                                        required>\n                                                </sw-number-field>\n                                                </template>\n                                                <template v-else>\n                                                    {{item.weight}}\n                                                </template>\n                                            </template>\n                                        {% endblock %}\n                                        {% block cross_sell_matrix_list_action %}\n                                            <template #actions="{item}">\n                                                <sw-context-menu-item @click="onShowDeleteModal(item)">\n                                                    Delete\n                                                </sw-context-menu-item>\n                                            </template>\n                                        {% endblock %}\n                                </sw-data-grid>\n                            {% endblock %}\n                        </template>\n                    </sw-card>\n                {% endblock %}\n                {% block cross_sell_matrix_list_confirm %}\n                    <sw-modal\n                        v-if="codeDeleteModal !== null"\n                        class="cross-sell-matrix_confirm-delete-modal"\n                        variant="small"\n                        @modal-close="onCloseDeleteModal"\n                        :title="$tc(\'cross-sell-matrix.form.confirmDelete\')"> \n                        {{ $tc(\'cross-sell-matrix.form.textDeleteConfirm\', 0, { property: codeDeleteModal.property_group.translated.name}) }}\n                        <template #modal-footer>\n                                {% block cross_sell_matrix_list_confirm_cancel %}\n                                    <sw-button\n                                        @click="onCloseDeleteModal"\n                                        variant="context"\n                                        size="small">\n                                        {{ $tc(\'cross-sell-matrix.form.deleteButtonCancel\') }}\n                                    </sw-button>\n                                {% endblock %}\n\n                                {% block cross_sell_matrix_list_confirm_delete %}\n                                    <sw-button\n                                        class="cross-sell-matrix__delete-button"\n                                        size="small"\n                                        variant="danger"\n                                        @click="deleteRule">\n                                        {{ $tc(\'cross-sell-matrix.form.deleteButtonDelete\') }}\n                                    </sw-button>\n                                {% endblock %}\n                            </template>\n                    </sw-modal>\n                {% endblock %}\n            </sw-card-view>\n        {% endblock %}\n    </sw-page>\n{% endblock %}',metaInfo:function(){return{title:this.$createTitle()}},inject:{repositoryFactory:"repositoryFactory"},mixins:[a.getByName("notification")],data:function(){return{items:null,dataSource:void 0,isLoading:!1,columns:[{property:"property_group.translated.name",label:this.$tc("cross-sell-matrix.entity.propertyGroup")},{property:"weight",label:this.$tc("cross-sell-matrix.entity.weight"),inlineEdit:"number"}],codeDeleteModal:null,settings:null}},computed:{crossSellingPropertyGroupRepository:function(){return this.repositoryFactory.create("webla_intelligent_cross_selling_property_group")},crossSellingPropertyGroupCriteria:function(){var e=new c;return e.addAssociation("property_group"),e},crossSellingSettingsRepository:function(){return this.repositoryFactory.create("webla_intelligent_cross_selling_settings")},crossSellingSettingsCriteria:function(){var e=new c;return e.setLimit(1),e}},created:function(){this.isLoading=!0},mounted:function(){this.createdComponent()},methods:{createdComponent:function(){var e=this;return s(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,e.getList();case 3:return t.next=5,e.getSettings();case 5:e.isLoading=!1;case 6:case"end":return t.stop()}}),t)})))()},getList:function(){var e=this;return s(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.crossSellingPropertyGroupRepository.search(e.crossSellingPropertyGroupCriteria,l.api);case 3:n=t.sent,e.dataSource=n,e.items=n,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.createNotificationError({message:e.$tc("cross-sell-matrix.list.messageSaveErrorLoad")});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},getSettings:function(){var e=this;return s(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.crossSellingSettingsRepository.search(e.crossSellingSettingsCriteria,l.api);case 3:if(0!==(n=t.sent).total){t.next=15;break}return t.next=7,e.crossSellingSettingsRepository.create(l.api);case 7:e.settings=t.sent,e.settings.title="",e.settings.maxProducts=5,e.settings.active=!1,e.settings.showTitle=!0,e.settings.onlyCategory=!1,t.next=16;break;case 15:e.settings=n[0];case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),e.createNotificationError({message:e.$tc("cross-sell-matrix.list.messageSaveErrorLoad")});case 21:case 22:case"end":return t.stop()}}),t,null,[[0,18]])})))()},onSave:function(){var e=this;return s(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.crossSellingSettingsRepository.save(e.settings,l.api);case 3:t.sent,e.getSettings(),e.createNotificationSuccess({message:e.$tc("cross-sell-matrix.list.messageSaveSuccess")}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),e.createNotificationError({message:e.$tc("cross-sell-matrix.list.messageSaveErrorGeneral")});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},saveItem:function(e){var t=this;return s(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.crossSellingPropertyGroupRepository.save(e,l.api);case 3:t.getList(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.createNotificationError({message:t.$tc("cross-sell-matrix.list.messageSaveErrorGeneral")});case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))()},deleteRule:function(){var e=this;return s(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.crossSellingPropertyGroupRepository.delete(e.codeDeleteModal.id,l.api);case 2:return e.onCloseDeleteModal(),t.next=5,e.getList();case 5:case"end":return t.stop()}}),t)})))()},onShowDeleteModal:function(e){this.codeDeleteModal=e},onCloseDeleteModal:function(){this.codeDeleteModal=null}}});n("2iCt");var u=Shopware,d=u.Component,m=u.Mixin;Shopware.Component.getComponentHelper().mapPropertyErrors;d.register("cross-sell-matrix-create",{template:'{% block cross_sell_matrix_create %}\n<sw-page class="cross-sell-matrix-create">\n\n    {% block cross_sell_matrix_create_actions %}\n    <template slot="smart-bar-actions">\n        {% block cross_sell_matrix_create_actions_abort %}\n        <sw-button :disabled="isLoading" @click="onCancel">\n            {{ $tc(\'cross-sell-matrix.create.buttonCancel\') }}\n        </sw-button>\n        {% endblock %}\n\n        {% block cross_sell_matrix_create_actions_save %}\n        <sw-button-process v-model="isSaveSuccessful" variant="primary"\n            :is-loading="isLoading" :disabled="isLoading" @click.prevent="onSave">\n            {{ $tc(\'cross-sell-matrix.create.buttonSave\') }}\n        </sw-button-process>\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    {% block cross_sell_matrix_create_content %}\n    <sw-card-view slot="content">\n        <template v-if="isLoading">\n            <sw-skeleton />\n            <sw-skeleton />\n        </template>\n\n        <template v-else>\n\n            {% block cross_sell_matrix_create_content_card %}\n            <sw-card>\n                <sw-entity-single-select v-model="item.propertyGroupId" entity="property_group"\n                    :label="$tc(\'cross-sell-matrix.entity.propertyGroupLabel\')"\n                    :placeholder="$tc(\'cross-sell-matrix.entity.propertyGroupPlaceholder\')" required>\n                </sw-entity-single-select>\n\n                <sw-number-field numberType="int" :step="1" :min="1" :max="100" v-model="item.weight" :digits="0" :fillDigits="false" :allowEmpty="false" :placeholder="$tc(\'cross-sell-matrix.entity.weightLabel\')">\n                    <template v-slot:prefix="{  disabled, identification  }"></template>\n                    <template v-slot:label>\n                        {{ $tc(\'cross-sell-matrix.entity.weightLabel\') }}\n                    </template>\n                </sw-number-field>\n            </sw-card>\n            {% endblock %}\n\n        </template>\n    </sw-card-view>\n    {% endblock %}\n\n</sw-page>\n{% endblock %}',metaInfo:function(){return{title:this.$createTitle()}},inject:["repositoryFactory","systemConfigApiService"],mixins:[m.getByName("notification")],data:function(){return{id:null,item:{propertyGroupId:null,weight:1},isLoading:!1,isSaveSuccessful:!1,config:{}}},computed:{crossSellingPropertyGroupRepository:function(){return this.repositoryFactory.create("webla_intelligent_cross_selling_property_group")}},watch:{},created:function(){this.createItem()},methods:{createItem:function(){this.isLoading=!0,this.item=this.crossSellingPropertyGroupRepository.create(Shopware.Context.api),this.isLoading=!1},onSave:function(){var e=this;this.isSaveSuccessful=!1,this.isLoading=!0,this.crossSellingPropertyGroupRepository.save(this.item,Shopware.Context.api).then((function(){e.isSaveSuccessful=!0,e.isLoading=!1,e.$router.push({name:"cross.sell.matrix.index"})})).catch((function(t){console.log(t),e.createNotificationError({message:e.$tc("cross-sell-matrix.create.messageSaveError")}),e.isLoading=!1}))},onCancel:function(){this.$router.push({name:"cross.sell.matrix.index"})}}}),Shopware.Module.register("cross-sell-matrix",{type:"core",name:"settings-cross-sell",title:"cross-sell-matrix.general.mainMenuItemGeneral",description:"",color:"#9AA8B5",icon:"default-action-settings",favicon:"icon-module-settings.png",entity:"crossSell",routes:{index:{component:"cross-sell-matrix-list",path:"index",meta:{parentPath:"sw.settings.index"}},create:{component:"cross-sell-matrix-create",path:"create",meta:{parentPath:"cross.sell.matrix.index"}}},settingsItem:{group:"plugins",to:"cross.sell.matrix.index",icon:"default-chart-pie",name:"cross-sell-matrix.general.mainMenuItemGeneral"}})},XaeS:function(e,t,n){},nDgs:function(e,t,n){},nEGZ:function(e,t,n){var r=n("XaeS");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n("SZ7m").default)("3500be25",r,!0,{})}});